{#
    EXEMPLE D'INT√âGRATION - TH√àME OC√âANS
    D√©montre comment adapter le template r√©tro au th√®me de la Nuit de l'Info
#}
{% extends 'retro_base.html.twig' %}

{% block title %}MISSION OC√âAN PIXEL{% endblock %}

{# Personnalisation des couleurs pour le th√®me oc√©an #}
{% block stylesheets %}
    {{ parent() }}
    <style>
        :root {
            /* Palette bleue pour les oc√©ans */
            --retro-primary: #00d9ff;      /* Bleu cyan oc√©an */
            --retro-secondary: #0066ff;    /* Bleu profond */
            --retro-accent: #00ffaa;       /* Vert aqua */
            --retro-warning: #ffd700;      /* Or pour le soleil */
            --retro-danger: #ff3366;       /* Corail rouge */
        }

        /* Effet vagues en arri√®re-plan */
        .ocean-waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(180deg, transparent, rgba(0, 102, 255, 0.2));
            z-index: 0;
            animation: wave 4s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* Poissons pixelis√©s anim√©s */
        .pixel-fish {
            position: fixed;
            font-size: 24px;
            z-index: 500;
            animation: swim 15s linear infinite;
        }

        @keyframes swim {
            from {
                left: -50px;
                transform: translateY(0);
            }
            to {
                left: 100vw;
                transform: translateY(-20px);
            }
        }
    </style>
{% endblock %}

{% block header_title %}
    <span class="retro-glitch" data-text="üåä MISSION OC√âAN PIXEL üåä">üåä MISSION OC√âAN PIXEL üåä</span>
{% endblock %}

{% block header_subtitle %}
    SAUVEZ LES OC√âANS EN MODE 8-BIT
    <br>
    <span class="retro-blink">‚ñ∂ NUIT DE L'INFO 2025 ‚óÄ</span>
{% endblock %}

{% block menu_items %}
    <li class="retro-menu-item active">üè† ACCUEIL</li>
    <li class="retro-menu-item">üåä OC√âANS</li>
    <li class="retro-menu-item">üêü BIODIVERSIT√â</li>
    <li class="retro-menu-item">‚ôªÔ∏è POLLUTION</li>
    <li class="retro-menu-item">üéÆ MINI-JEUX</li>
    <li class="retro-menu-item">üìä STATS</li>
{% endblock %}

{% block main_content %}
    {# Introduction mission #}
    <div class="retro-card retro-float">
        <h2 class="retro-subtitle">üéÆ BRIEFING DE MISSION</h2>
        <p class="retro-text retro-mb-2">
            Agent {{ random(100, 999) }}, les oc√©ans sont en danger !
            <br><br>
            Votre mission : Apprendre, agir et prot√©ger nos oc√©ans
            dans cette aventure r√©tro gaming. Collectez des informations,
            sauvez des esp√®ces, et combattez la pollution pixel par pixel !
        </p>
        <button class="retro-button" onclick="alert('üéÆ Mission accept√©e ! Que l\'aventure commence!')">
            ACCEPTER LA MISSION
        </button>
        <button class="retro-button secondary" onclick="alert('üëæ Vous ne pouvez pas refuser!')">
            REFUSER (L√ÇCHE!)
        </button>
    </div>

    {# Statistiques oc√©ans #}
    <div class="retro-card retro-mt-2">
        <h2 class="retro-subtitle retro-center">üìä √âTAT DES OC√âANS</h2>

        <div class="retro-mb-2">
            <p class="retro-text">üåä Sant√© des oc√©ans:</p>
            <div class="retro-progress-bar">
                <div class="retro-progress-fill" id="ocean-health" style="width: 0%"></div>
            </div>
        </div>

        <div class="retro-mb-2">
            <p class="retro-text">üêü Biodiversit√©:</p>
            <div class="retro-progress-bar">
                <div class="retro-progress-fill" id="biodiversity" style="width: 0%"></div>
            </div>
        </div>

        <div class="retro-mb-2">
            <p class="retro-text">‚ôªÔ∏è Niveau de pollution:</p>
            <div class="retro-progress-bar">
                <div class="retro-progress-fill" id="pollution" style="width: 0%; background: repeating-linear-gradient(90deg, #ff3366, #ff3366 10px, #ff0040 10px, #ff0040 20px);"></div>
            </div>
        </div>

        <div class="retro-center retro-mt-2">
            <span class="retro-badge">ESP√àCES MENAC√âES: 1,000+</span>
            <span class="retro-badge">PLASTIQUE: 8M TONNES/AN</span>
            <span class="retro-badge retro-blink">URGENT!</span>
        </div>
    </div>

    {# Les menaces - Style Boss de jeu vid√©o #}
    <div class="retro-card retro-mt-2">
        <h2 class="retro-subtitle retro-center">üëæ BOSS √Ä COMBATTRE üëæ</h2>

        <div class="retro-grid">
            <div class="retro-card">
                <h3 class="retro-subtitle">üóëÔ∏è BOSS: POLLUTION</h3>
                <p class="retro-text">
                    HP: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80%<br>
                    ATK: Plastique<br>
                    DEF: N√©gligence<br>
                    <br>
                    8 millions de tonnes de plastique sont d√©vers√©es
                    dans les oc√©ans chaque ann√©e !
                </p>
                <button class="retro-button" onclick="alert('üí• Attaque: Recyclage! -10 HP')">
                    ATTAQUER
                </button>
            </div>

            <div class="retro-card">
                <h3 class="retro-subtitle">üå°Ô∏è BOSS: R√âCHAUFFEMENT</h3>
                <p class="retro-text">
                    HP: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%<br>
                    ATK: CO2<br>
                    DEF: Lobby p√©trolier<br>
                    <br>
                    Les oc√©ans absorbent 90% de la chaleur du
                    r√©chauffement climatique !
                </p>
                <button class="retro-button" onclick="alert('üí® Attaque: √ânergies vertes! -5 HP')">
                    ATTAQUER
                </button>
            </div>

            <div class="retro-card">
                <h3 class="retro-subtitle">üé£ BOSS: SURP√äCHE</h3>
                <p class="retro-text">
                    HP: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë 70%<br>
                    ATK: Chalutiers<br>
                    DEF: Quotas d√©pass√©s<br>
                    <br>
                    33% des stocks de poissons sont surexploit√©s
                    dans le monde !
                </p>
                <button class="retro-button" onclick="alert('üõ°Ô∏è D√©fense: Zones prot√©g√©es! -15 HP')">
                    ATTAQUER
                </button>
            </div>

            <div class="retro-card">
                <h3 class="retro-subtitle">üè≠ BOSS: ACIDIFICATION</h3>
                <p class="retro-text">
                    HP: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë 90%<br>
                    ATK: pH killer<br>
                    DEF: Inertie<br>
                    <br>
                    L'acidit√© des oc√©ans a augment√© de 30% depuis
                    la r√©volution industrielle !
                </p>
                <button class="retro-button" onclick="alert('‚öóÔ∏è Attaque: Capture carbone! -8 HP')">
                    ATTAQUER
                </button>
            </div>
        </div>
    </div>

    {# H√©ros √† d√©bloquer - Les esp√®ces marines #}
    <div class="retro-card retro-mt-2">
        <h2 class="retro-subtitle retro-center">ü¶∏ H√âROS √Ä SAUVER</h2>
        <p class="retro-text retro-center retro-mb-2">
            Prot√©gez ces esp√®ces embl√©matiques pour d√©bloquer des bonus !
        </p>

        <div class="retro-grid">
            <div class="retro-card retro-center">
                <div style="font-size: 3rem;">üê¢</div>
                <h3 class="retro-subtitle">TORTUE MARINE</h3>
                <span class="retro-badge retro-blink">EN DANGER</span>
            </div>

            <div class="retro-card retro-center">
                <div style="font-size: 3rem;">üêã</div>
                <h3 class="retro-subtitle">BALEINE BLEUE</h3>
                <span class="retro-badge">VULN√âRABLE</span>
            </div>

            <div class="retro-card retro-center">
                <div style="font-size: 3rem;">ü¶à</div>
                <h3 class="retro-subtitle">REQUIN</h3>
                <span class="retro-badge">MENAC√â</span>
            </div>

            <div class="retro-card retro-center">
                <div style="font-size: 3rem;">üêô</div>
                <h3 class="retro-subtitle">POULPE</h3>
                <span class="retro-badge" style="background: var(--retro-primary);">STABLE</span>
            </div>

            <div class="retro-card retro-center">
                <div style="font-size: 3rem;">üê†</div>
                <h3 class="retro-subtitle">POISSON CLOWN</h3>
                <span class="retro-badge">VULN√âRABLE</span>
            </div>

            <div class="retro-card retro-center">
                <div style="font-size: 3rem;">ü¶Ä</div>
                <h3 class="retro-subtitle">CRABE</h3>
                <span class="retro-badge" style="background: var(--retro-primary);">STABLE</span>
            </div>
        </div>
    </div>

    {# Mini-jeu / Quiz #}
    <div class="retro-card retro-mt-2">
        <h2 class="retro-subtitle">üéÆ QUIZ OC√âAN - NIVEAU 1</h2>

        <div class="retro-mb-2">
            <span class="retro-badge">SCORE: 0</span>
            <span class="retro-badge">VIES: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
            <span class="retro-badge">NIVEAU: 1</span>
        </div>

        <p class="retro-text retro-mb-2">
            <strong>QUESTION:</strong><br>
            Quelle est la profondeur maximale de l'oc√©an ?
        </p>

        <button class="retro-button retro-mb-1" style="display: block; width: 100%;"
                onclick="alert('‚ùå FAUX! -1 vie')">
            A) 5,000 m√®tres
        </button>
        <button class="retro-button retro-mb-1" style="display: block; width: 100%;"
                onclick="alert('‚úÖ CORRECT! +100 points\nFosse des Mariannes: 11,034m')">
            B) 11,000 m√®tres
        </button>
        <button class="retro-button retro-mb-1" style="display: block; width: 100%;"
                onclick="alert('‚ùå FAUX! -1 vie')">
            C) 20,000 m√®tres
        </button>
        <button class="retro-button" style="display: block; width: 100%;"
                onclick="alert('‚ùå FAUX! -1 vie')">
            D) 8,000 m√®tres
        </button>
    </div>

    {# Tableau des scores #}
    <div class="retro-card retro-mt-2">
        <h2 class="retro-subtitle retro-center">üèÜ HIGH SCORES üèÜ</h2>

        <div class="retro-console">
            <div class="retro-console-line" style="color: #ffd700;">1ST  AAA .......... 999,999</div>
            <div class="retro-console-line" style="color: #c0c0c0;">2ND  ECO .......... 888,888</div>
            <div class="retro-console-line" style="color: #cd7f32;">3RD  SEA .......... 777,777</div>
            <div class="retro-console-line">4TH  OCE .......... 666,666</div>
            <div class="retro-console-line">5TH  H2O .......... 555,555</div>
            <div class="retro-console-line">6TH  BLU .......... 444,444</div>
            <div class="retro-console-line">7TH  WAV .......... 333,333</div>
            <div class="retro-console-line">8TH  FIS .......... 222,222</div>
            <div class="retro-console-line">9TH  CRL .......... 111,111</div>
            <div class="retro-console-line">10TH YOU .......... 000,000</div>
        </div>

        <div class="retro-center retro-mt-2">
            <p class="retro-text retro-blink">ENTER YOUR NAME:</p>
            <input type="text"
                   maxlength="3"
                   placeholder="___"
                   style="width: 100px;
                          padding: 10px;
                          background: var(--retro-dark);
                          border: 3px solid var(--retro-primary);
                          color: var(--retro-primary);
                          font-family: var(--font-pixel);
                          font-size: 1.5rem;
                          text-align: center;">
        </div>
    </div>

    {# Achievements #}
    <div class="retro-card retro-mt-2">
        <h2 class="retro-subtitle retro-center">üéñÔ∏è ACHIEVEMENTS</h2>

        <div class="retro-grid">
            <div class="retro-card retro-center">
                <div style="font-size: 2rem;">üèÜ</div>
                <p class="retro-text">FIRST STEPS</p>
                <small class="retro-text">Visitez le site</small>
            </div>

            <div class="retro-card retro-center" style="opacity: 0.5;">
                <div style="font-size: 2rem;">üåä</div>
                <p class="retro-text">OCEAN MASTER</p>
                <small class="retro-text">Terminez tous les niveaux</small>
            </div>

            <div class="retro-card retro-center" style="opacity: 0.5;">
                <div style="font-size: 2rem;">üíØ</div>
                <p class="retro-text">PERFECT SCORE</p>
                <small class="retro-text">100% au quiz</small>
            </div>

            <div class="retro-card retro-center">
                <div style="font-size: 2rem;">üéÆ</div>
                <p class="retro-text">KONAMI CODE</p>
                <small class="retro-text">D√©couvrez le secret!</small>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_content %}
    {# √âl√©ments d√©coratifs anim√©s #}
    <div class="ocean-waves"></div>
    <div class="pixel-fish" style="top: 20%;">üêü</div>
    <div class="pixel-fish" style="top: 40%; animation-delay: -5s; animation-duration: 20s;">üê†</div>
    <div class="pixel-fish" style="top: 60%; animation-delay: -10s; animation-duration: 25s;">üê°</div>
{% endblock %}

{% block footer_text %}
    <span class="retro-blink">‚ñà</span> SAUVEZ LES OC√âANS, UN PIXEL √Ä LA FOIS <span class="retro-blink">‚ñà</span>
    <br>
    <small style="font-size: 0.6rem;">
        NUIT DE L'INFO 2025 - D√âFI IUTLCO<br>
        "ON VEUT DU GROS PIXEL!" ‚ú®üéÆüëæüïπÔ∏è
    </small>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animer les barres de progression
            setTimeout(() => {
                if (window.retroGaming) {
                    retroGaming.animateProgressBar('#ocean-health', 65, 2000);
                }
            }, 500);

            setTimeout(() => {
                if (window.retroGaming) {
                    retroGaming.animateProgressBar('#biodiversity', 58, 2000);
                }
            }, 1000);

            setTimeout(() => {
                if (window.retroGaming) {
                    retroGaming.animateProgressBar('#pollution', 85, 2000);
                }
            }, 1500);

            // Message de bienvenue th√©matique
            setTimeout(() => {
                if (window.retroGaming) {
                    retroGaming.showNotification('üåä BIENVENUE AGENT OC√âAN! üåä', 'success');
                }
            }, 2000);

            // Easter egg personnalis√©
            let fishClicks = 0;
            document.querySelectorAll('.pixel-fish').forEach(fish => {
                fish.addEventListener('click', function() {
                    fishClicks++;
                    if (window.retroGaming) {
                        retroGaming.createParticles(event.clientX, event.clientY, 15);
                        retroGaming.showNotification(`üêü Poisson ${fishClicks} attrap√©!`, 'success');
                    }
                    if (fishClicks >= 3) {
                        alert('üèÜ ACHIEVEMENT D√âBLOQU√â: P√äCHEUR PIXEL!\n+1000 points');
                        fishClicks = 0;
                    }
                });
            });
        });
    </script>
{% endblock %}
